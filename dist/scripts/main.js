!function(){class n{constructor(e){return this.setBlockElement=null,this.setButtonElement=null,this.inputElements=[],this.motherElement=e,this.createSetBlock(),[this.setBlockElement,this.inputElements]}createSetBlock(){this.setBlockElement=document.createElement("div"),this.setBlockElement.className="new_set";var e=document.createElement("div");e.className="set-point",this.setBlockElement.appendChild(e);for(let e=0;e<2;e++){var t=document.createElement("label"),n=(t.className=0===e?"weight":"repeats",document.createElement("input")),s=(n.setAttribute("type","number"),0===e?this.weigntValidation(n):this.repValidation(n),this.inputElements.push(n),document.createElement("span"));s.innerText=0===e?"kg":"rep",t.appendChild(n),t.appendChild(s),this.setBlockElement.appendChild(t)}e=document.createElement("div");e.className="btn add",e.innerText="+",this.addBtnLogic(e),this.setButtonElement=e,this.setBlockElement.appendChild(this.setButtonElement)}weigntValidation(e){e.addEventListener("input",e=>{var t=e.target.value.replace(/\D/g,"").match(/(\d{0,2})(\d{0,2})/);e.target.value=t[2]?t[1]+"."+t[2]:t[1]})}repValidation(e){e.addEventListener("input",e=>{var t=e.target.value.replace(/\D/g,"").match(/(\d{0,2})/);e.target.value=t[1]})}addBtnLogic(e){const s=this;e.addEventListener("click",function e(){function t(){s.setButtonElement.innerText="sbmt",s.inputElements.forEach(e=>{e.removeAttribute("disabled")}),this.removeEventListener("click",t),this.addEventListener("click",n)}function n(){s.inputElements[0].value&&s.inputElements[1].value?(s.setButtonElement.innerText="edit",s.inputElements.forEach(e=>{e.setAttribute("disabled","disabled")}),this.removeEventListener("click",n),this.addEventListener("click",t)):console.log("empty val")}s.inputElements[0].value&&s.inputElements[1].value?(this.removeEventListener("click",e),this.addEventListener("click",n),s.motherElement.createSetElement(),n.call(this)):console.log("empty val")})}}class s{constructor(e){this.xrcsName=e,this.xrcsBlockElement=null,this.xrcsInfoLastTraining=null,this.xrcsSetsElement=null,this.inputsElements=[],this.init()}init(){this.createBlock(),this.showBlock()}createBlock(){this.xrcsBlockElement=document.createElement("div"),this.xrcsBlockElement.className="block exercise";var e=this.createInfoElement();this.xrcsBlockElement.appendChild(e),this.xrcsSetsElement=document.createElement("div"),this.xrcsSetsElement.className="exercise__sets",this.xrcsBlockElement.appendChild(this.xrcsSetsElement),this.createSetElement()}createInfoElement(){var e=document.createElement("div"),t=(e.className="exercies__info",document.createElement("div"));return t.className="name",t.innerText=this.xrcsName+":",this.xrcsInfoLastTraining=document.createElement("div"),this.xrcsInfoLastTraining.className="last_training",e.appendChild(t),e.appendChild(this.xrcsInfoLastTraining),e}createSetElement(){var[e,t]=new n(this);this.inputsElements.push(t),this.xrcsSetsElement.appendChild(e)}showBlock(){document.getElementById("exercises").appendChild(this.xrcsBlockElement)}close(e){this.xrcsInfoLastTraining.innerHTML="",e.setsVal.forEach(e=>{var t=document.createElement("div"),e=`${e.weight} kg/${e.rep} repearts`;t.innerText=e,this.xrcsInfoLastTraining.appendChild(t)}),this.xrcsBlockElement.removeChild(this.xrcsSetsElement)}}let l=[];function i(e){let t={name:e.name,setsVal:[]};e.element.inputsElements.forEach(e=>{e[0].value&&e[1].value&&t.setsVal.push({weight:e[0].value,rep:e[1].value})}),0===t.setsVal.length?(e.element.xrcsBlockElement.classList.add("remove"),setTimeout(()=>{document.getElementById("exercises").removeChild(e.element.xrcsBlockElement),l.remove(e)},3e3)):(e.element.close(t),e.result=t,console.log(l))}$("#add-exercise").click(()=>{var e,t=$("#xrcsName").val();$("#xrcsName").val(""),t&&((e=l[l.length-1])&&i(e),newXrcs=new s(t),l.push({name:t,element:newXrcs}))}),$("#finish").click(()=>{var e=l[l.length-1];e&&i(e);let t=[];l.forEach(e=>{t.push({date:new Date,name:e.name,setsVal:e.result.setsVal}),document.getElementById("exercises").removeChild(e.element.xrcsBlockElement)}),console.log(t),localStorage.setItem("training",JSON.stringify(t))})}();